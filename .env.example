# Health Export REST API Environment Configuration (Rust/Actix-web)
# PostgreSQL Database Configuration

# Primary Database URL for Rust application
DATABASE_URL=postgresql://username:password@localhost:5432/database_name

# Test Database URL for running Rust tests
TEST_DATABASE_URL=postgresql://username:password@localhost:5432/test_database_name

# Database Connection Pool Settings
DATABASE_MAX_CONNECTIONS=20
DATABASE_MIN_CONNECTIONS=5
DATABASE_CONNECT_TIMEOUT=10
DATABASE_IDLE_TIMEOUT=300
DATABASE_MAX_LIFETIME=3600

# Redis Configuration
REDIS_URL=redis://localhost:6379
REDIS_POOL_SIZE=10
REDIS_TIMEOUT=5

# Application Configuration
RUST_LOG=info
SERVER_HOST=0.0.0.0
SERVER_PORT=8080
WORKERS=4

# Security Configuration
API_KEY_HASH_MEMORY=19456
API_KEY_HASH_ITERATIONS=2
API_KEY_HASH_PARALLELISM=1

# Rate Limiting Configuration
RATE_LIMIT_REQUESTS_PER_HOUR=100
RATE_LIMIT_BANDWIDTH_MB_PER_HOUR=10
# IP-based rate limiting for unauthenticated requests (more restrictive)
RATE_LIMIT_IP_REQUESTS_PER_HOUR=20

# Request Timeout Configuration (Cloudflare 100s limit)
# Keep under 100 seconds to prevent Cloudflare timeout
REQUEST_TIMEOUT_SECONDS=90

# Monitoring Configuration
METRICS_PORT=9090
LOG_LEVEL=info

# Development/Production Environment
ENVIRONMENT=development

# CORS Security Configuration
# Comma-separated list of allowed origins (no spaces)
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001,https://localhost:3000,https://localhost:3001
# Max age for preflight requests (seconds)
CORS_MAX_AGE=3600
# Allow credentials (true/false) - use with caution
CORS_ALLOW_CREDENTIALS=false

# Optional: Database SSL Configuration (uncomment for production)
# DATABASE_SSL_MODE=require
# DATABASE_SSL_CERT_PATH=/path/to/cert.pem
# DATABASE_SSL_KEY_PATH=/path/to/key.pem
# DATABASE_SSL_CA_PATH=/path/to/ca.pem